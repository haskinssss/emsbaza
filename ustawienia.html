<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EMS - Ustawienia</title>
    <link rel="icon" type="image/png" href="Emergency.png">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="knowledge-base-theme">
    <nav class="top-navbar">
        <div class="navbar-left">
            <img src="Emergency.png" alt="EMS Logo" class="navbar-logo">
            <h1>Ustawienia</h1>
        </div>
        <div class="navbar-right">
            <div class="menu-container">
                <button class="menu-btn">Menu â–¼</button>
                <div class="dropdown-menu">
                    <a href="baza-wiedzy.html">ğŸ  Strona gÅ‚Ã³wna</a>
                    <a href="ustawienia.html">âš™ï¸ Ustawienia</a>
                    <a href="#" id="logoutBtn">ğŸšª Wyloguj</a>
                </div>
            </div>
        </div>
    </nav>
    
    <main class="main-content">
        <div class="welcome-section">
            <h2>Ustawienia Systemu</h2>
            <button class="user-profile-btn" id="userProfileBtn"><span id="userName">Åadowanie...</span></button>
        </div>
        
        <div class="settings-container">
            <div class="setting-card">
                <div class="setting-header">
                    <h3>ğŸ¨ Tryb wyÅ›wietlania</h3>
                </div>
                <div class="setting-content">
                    <p>Wybierz tryb wyÅ›wietlania interfejsu</p>
                    <div class="setting-control">
                        <button class="theme-toggle-btn" id="themeToggle">
                            <span class="theme-icon">ğŸŒ™</span>
                            <span class="theme-text">Dark Mode</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="setting-card">
                <div class="setting-header">
                    <h3>ğŸ¨ Kolor Obramowania <span style="background: linear-gradient(135deg, #8b5cf6 0%, #06b6d4 100%); padding: 4px 10px; border-radius: 6px; font-size: 0.7rem; font-weight: 700; text-transform: uppercase; margin-left: 10px; box-shadow: 0 2px 8px rgba(139, 92, 246, 0.4);">BETA</span></h3>
                </div>
                <div class="setting-content">
                    <p>Wybierz swÃ³j ulubiony kolor dla obramowaÅ„ i efektÃ³w glow'u</p>
                    <p style="font-size: 0.85rem; color: rgba(255,255,255,0.6); margin-top: 8px; font-style: italic;">âš ï¸ Funkcja w fazie testÃ³w - niektÃ³re elementy mogÄ… nie zmieniaÄ‡ koloru poprawnie</p>
                    <div class="setting-control" style="flex-direction: column; align-items: flex-start;">
                        <div class="accent-presets">
                            <button class="accent-preset" data-color="#8b5cf6" style="background: #8b5cf6;" title="Purpurowy">ğŸ’œ</button>
                            <button class="accent-preset" data-color="#3b82f6" style="background: #3b82f6;" title="Niebieski">ğŸ’™</button>
                            <button class="accent-preset" data-color="#10b981" style="background: #10b981;" title="Zielony">ğŸ’š</button>
                            <button class="accent-preset" data-color="#f59e0b" style="background: #f59e0b;" title="PomaraÅ„czowy">ğŸ§¡</button>
                            <button class="accent-preset" data-color="#ef4444" style="background: #ef4444;" title="Czerwony">â¤ï¸</button>
                            <button class="accent-preset" data-color="#06b6d4" style="background: #06b6d4;" title="Cyan">ğŸ’</button>
                            <button class="accent-preset" data-color="#ec4899" style="background: #ec4899;" title="RÃ³Å¼owy">ğŸŒ¸</button>
                        </div>
                        <div style="margin-top: 15px; width: 100%;">
                            <label for="accentColorPicker" style="display: block; margin-bottom: 8px; font-weight: 600; text-transform: uppercase; font-size: 0.85rem; color: rgba(255,255,255,0.7);">Wybierz wÅ‚asny kolor:</label>
                            <input type="color" id="accentColorPicker" style="width: 60px; height: 40px; border: 2px solid rgba(139, 92, 246, 0.5); border-radius: 8px; cursor: pointer;" value="#8b5cf6">
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="setting-card">
                <div class="setting-header">
                    <h3>ğŸ”” Animacje</h3>
                </div>
                <div class="setting-content">
                    <p>WÅ‚Ä…cz lub wyÅ‚Ä…cz animacje interfejsu</p>
                    <div class="setting-control">
                        <label class="switch">
                            <input type="checkbox" id="animationsToggle" checked>
                            <span class="slider"></span>
                        </label>
                        <span class="switch-label">Animacje wÅ‚Ä…czone</span>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <script src="auth.js"></script>
    <script src="settings.js?v=20260213j"></script>
    <script>
        // ObsÅ‚uga przeÅ‚Ä…cznika motywu
        document.addEventListener('DOMContentLoaded', () => {
            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = themeToggle.querySelector('.theme-icon');
            const themeText = themeToggle.querySelector('.theme-text');
            const animationsToggle = document.getElementById('animationsToggle');
            const switchLabel = document.querySelector('.switch-label');
            
            // ZaÅ‚aduj aktualne ustawienia
            const settings = window.emsSettings.load();
            
            // Ustaw stan przyciskÃ³w
            if (settings.darkMode) {
                themeIcon.textContent = 'ğŸŒ™';
                themeText.textContent = 'Dark Mode';
            } else {
                themeIcon.textContent = 'â˜€ï¸';
                themeText.textContent = 'Light Mode';
            }
            
            animationsToggle.checked = settings.animations;
            switchLabel.textContent = settings.animations ? 'Animacje wÅ‚Ä…czone' : 'Animacje wyÅ‚Ä…czone';
            
            // PrzeÅ‚Ä…cznik dark/light mode
            themeToggle.addEventListener('click', () => {
                window.emsSettings.toggleDarkMode();
                const newSettings = window.emsSettings.load();
                
                if (newSettings.darkMode) {
                    themeIcon.textContent = 'ğŸŒ™';
                    themeText.textContent = 'Dark Mode';
                    showSuccessToast('âœ“ WÅ‚Ä…czono tryb ciemny');
                } else {
                    themeIcon.textContent = 'â˜€ï¸';
                    themeText.textContent = 'Light Mode';
                    showSuccessToast('âœ“ WÅ‚Ä…czono tryb jasny');
                }
            });
            
            // PrzeÅ‚Ä…cznik animacji
            animationsToggle.addEventListener('change', () => {
                window.emsSettings.toggleAnimations();
                const newSettings = window.emsSettings.load();
                switchLabel.textContent = newSettings.animations ? 'Animacje wÅ‚Ä…czone' : 'Animacje wyÅ‚Ä…czone';
                
                if (newSettings.animations) {
                    showSuccessToast('âœ“ Animacje wÅ‚Ä…czone');
                } else {
                    showErrorToast('Animacje wyÅ‚Ä…czone');
                }
            });
        });
    </script>
</body>
</html>
